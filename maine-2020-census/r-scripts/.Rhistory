,"PLACECC", "PLACESC", "TRACT", "BLKGRP", "BLOCK", "IUC", "CONCIT"
,"CONCITCC", "CONCITSC")
colnames(header_2010)
header_2010_add <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep=""))
#Load 2010 files
library(stringr)
header_file_path <- "../raw-data/me2010/megeo2010.pl"
part1_file_path  <- "../raw-data/me2010/me000012010.pl"
header_2010 <- read.delim(header_file_path, header=FALSE, colClasses="character", sep="")
part1_2010  <- read.delim(part1_file_path,  header=FALSE, colClasses="character", sep=",")
colnames(part1_2010) <- c("FILEID", "STUSAB", "CHARITER", "CIFSN", "LOGRECNO",
paste0("P00", c(10001:10071, 20001:20073)))
header_2010 <- read.fwf(header_file_path,
c(6, 2, 3, 2, 3, 2, 7, 1, 1, 2, 3, 2, 2, 5, 2, 2, 5, 2, 2, 6, 1, 4, 2, 5, 2, 2)
, header=FALSE)
colnames(header_2010) <- c("FILEID", "STUSAB", "SUMLEV", "GEOCOMP", "CHARITER", "CIFSN", "LOGRECNO", "REGION", "DIVISION",
"STATE", "COUNTY", "COUNTYCC", "COUNTYSC", "COUSUB", "COUSUBCC", "COUSUBSC", "PLACE"
,"PLACECC", "PLACESC", "TRACT", "BLKGRP", "BLOCK", "IUC", "CONCIT"
,"CONCITCC", "CONCITSC")
colnames(header_2010)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep=""))
geo_subset_2010 <- select(header_2010, STUSAB, LOGRECNO, GEOCODE, COUSUB)
geo_subset_2020 <- select(header_2020, STUSAB, LOGRECNO, GEOCODE, COUSUB)
View(geo_subset_2010)
write.csv(geo_subset, "me-geo-reference.csv")
write.csv(pop_all, "2010-2020-population-compare.csv")
pop_all <- union_all(total_pop_2010, total_pop_2020)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
View(part1_2020)
colnames(part1_2020) <- c("FILEID", "STUSAB", "CHARITER", "CIFSN", "LOGRECNO",
paste0("P00", c(10001:10071, 20001:20073)))
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
write.csv(geo_subset, "me-geo-reference.csv")
write.csv(pop_all, "2010-2020-population-compare.csv")
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
write.csv(geo_subset, "me-geo-reference.csv")
write.csv(pop_all, "2010-2020-population-compare.csv")
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
header_2010$LOGRECNO <- as.character(header_2010$LOGRECNO)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
header_2020$LOGRECNO <- as.character(header_2020$LOGRECNO)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset_2010 <- select(header_2010, STUSAB, LOGRECNO, GEOCODE, COUSUB)
geo_subset_2020 <- select(header_2020, STUSAB, LOGRECNO, GEOCODE, COUSUB)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep=""))
#Load 2010 files
library(stringr)
header_file_path <- "../raw-data/me2010/megeo2010.pl"
part1_file_path  <- "../raw-data/me2010/me000012010.pl"
header_2010 <- read.delim(header_file_path, header=FALSE, colClasses="character", sep="")
part1_2010  <- read.delim(part1_file_path,  header=FALSE, colClasses="character", sep=",")
colnames(part1_2010) <- c("FILEID", "STUSAB", "CHARITER", "CIFSN", "LOGRECNO",
paste0("P00", c(10001:10071, 20001:20073)))
header_2010 <- read.fwf(header_file_path,
c(6, 2, 3, 2, 3, 2, 7, 1, 1, 2, 3, 2, 2, 5, 2, 2, 5, 2, 2, 6, 1, 4, 2, 5, 2, 2)
, header=FALSE)
colnames(header_2010) <- c("FILEID", "STUSAB", "SUMLEV", "GEOCOMP", "CHARITER", "CIFSN", "LOGRECNO", "REGION", "DIVISION",
"STATE", "COUNTY", "COUNTYCC", "COUNTYSC", "COUSUB", "COUSUBCC", "COUSUBSC", "PLACE"
,"PLACECC", "PLACESC", "TRACT", "BLKGRP", "BLOCK", "IUC", "CONCIT"
,"CONCITCC", "CONCITSC")
colnames(header_2010)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep=""))
header_2010$LOGRECNO <- as.character(header_2010$LOGRECNO)
header_2020$LOGRECNO <- as.character(header_2020$LOGRECNO)
header_2010$LOGRECNO <- as.character(header_2010$LOGRECNO)
#Load 2010 files
library(stringr)
header_file_path <- "../raw-data/me2010/megeo2010.pl"
part1_file_path  <- "../raw-data/me2010/me000012010.pl"
header_2010 <- read.delim(header_file_path, header=FALSE, colClasses="character", sep="")
part1_2010  <- read.delim(part1_file_path,  header=FALSE, colClasses="character", sep=",")
colnames(part1_2010) <- c("FILEID", "STUSAB", "CHARITER", "CIFSN", "LOGRECNO",
paste0("P00", c(10001:10071, 20001:20073)))
header_2010 <- read.fwf(header_file_path,
c(6, 2, 3, 2, 3, 2, 7, 1, 1, 2, 3, 2, 2, 5, 2, 2, 5, 2, 2, 6, 1, 4, 2, 5, 2, 2)
, header=FALSE)
colnames(header_2010) <- c("FILEID", "STUSAB", "SUMLEV", "GEOCOMP", "CHARITER", "CIFSN", "LOGRECNO", "REGION", "DIVISION",
"STATE", "COUNTY", "COUNTYCC", "COUNTYSC", "COUSUB", "COUSUBCC", "COUSUBSC", "PLACE"
,"PLACECC", "PLACESC", "TRACT", "BLKGRP", "BLOCK", "IUC", "CONCIT"
,"CONCITCC", "CONCITSC")
colnames(header_2010)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep=""))
class(header_2010)
class(header_2010$LOGRECNO)
class(header_2020$LOGRECNO)
as.character(header_2010$LOGRECNO)
header_2010$LOGRECNO
str(header_2010)
header_2010$LOGRECNO_STR <- as.character(header_2010$LOGRECNO)
View(header_2010)
geo_subset_2010 <- select(header_2010, STUSAB, LOGRECNO_STR, GEOCODE, COUSUB)
geo_subset_2020 <- select(header_2020, STUSAB, LOGRECNO, GEOCODE, COUSUB)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
str(header_2010$COUSUB)
str(header_2020$COUSUB)
header_2010$COUSUB <- as.character(header_2010$COUSUB)
geo_subset_2010 <- select(header_2010, STUSAB, LOGRECNO_STR, GEOCODE, COUSUB)
geo_subset_2020 <- select(header_2020, STUSAB, LOGRECNO, GEOCODE, COUSUB)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
write.csv(geo_subset, "me-geo-reference.csv")
write.csv(pop_all, "2010-2020-population-compare.csv")
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
nchar(geo_subset$GEOCODE)
geo_subset <- get_subset[nchar(geo_subset$GEOCODE) == 10]
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10]
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
View(geo_subset)
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
geo_subset_2010 <- header_2010 %>%
select(STUSAB, LOGRECNO_STR, GEOCODE, COUSUB) %>%
mutate(year = 2010)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
distinct(geo_subset$year)
unique(geo_subset$year)
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, LOGRECNO_STR, GEOCODE, COUSUB) %>%
mutate(year = 2010)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
View(geo_subset_2010)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
View(geo_subset)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
unique(geo_subset$LOGRECNO_STR)
geo_subset_2010$LOGRECNO <- geo_subset_2010$LOGRECNO_STR
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
geo_subset <- drop(geo_subset$LOGRECNO_STR)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, LOGRECNO_STR, GEOCODE, COUSUB) %>%
mutate(year = 2010)
geo_subset_2010$LOGRECNO <- geo_subset_2010$LOGRECNO_STR
geo_subset_2020 <- header_2020 %>%
select(STUSAB, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, LOGRECNO_STR, GEOCODE, COUSUB) %>%
mutate(year = 2010) %>%
rename(., LOGRECNO_STR = LOGRECNO)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(header_2010)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep="")) %>%
filter(., SUMLEV = 720)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep="")) %>%
filter(., SUMLEV == 720)
View(header_2010)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, LOGRECNO_STR, GEOCODE, COUSUB) %>%
mutate(year = 2010) %>%
rename(., LOGRECNO_STR = LOGRECNO)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(header_2020)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO_STR, GEOCODE, COUSUB) %>%
mutate(year = 2010) %>%
rename(., LOGRECNO_STR = LOGRECNO)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2010) %>%
rename(., LOGRECNO_STR = LOGRECNO)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
header_2010$SUMLEV <- as.character(header_2010$SUMLEV)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2010) %>%
rename(., LOGRECNO_STR = LOGRECNO)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
#Load 2010 files
library(stringr)
header_file_path <- "../raw-data/me2010/megeo2010.pl"
part1_file_path  <- "../raw-data/me2010/me000012010.pl"
header_2010 <- read.delim(header_file_path, header=FALSE, colClasses="character", sep="")
part1_2010  <- read.delim(part1_file_path,  header=FALSE, colClasses="character", sep=",")
colnames(part1_2010) <- c("FILEID", "STUSAB", "CHARITER", "CIFSN", "LOGRECNO",
paste0("P00", c(10001:10071, 20001:20073)))
header_2010 <- read.fwf(header_file_path,
c(6, 2, 3, 2, 3, 2, 7, 1, 1, 2, 3, 2, 2, 5, 2, 2, 5, 2, 2, 6, 1, 4, 2, 5, 2, 2)
, header=FALSE)
colnames(header_2010) <- c("FILEID", "STUSAB", "SUMLEV", "GEOCOMP", "CHARITER", "CIFSN", "LOGRECNO", "REGION", "DIVISION",
"STATE", "COUNTY", "COUNTYCC", "COUNTYSC", "COUSUB", "COUSUBCC", "COUSUBSC", "PLACE"
,"PLACECC", "PLACESC", "TRACT", "BLKGRP", "BLOCK", "IUC", "CONCIT"
,"CONCITCC", "CONCITSC")
colnames(header_2010)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep=""))
# filter(., SUMLEV == 720)
header_2010$LOGRECNO <- as.character(header_2010$LOGRECNO)
header_2010$COUSUB <- as.character(header_2010$COUSUB)
header_2010$SUMLEV <- as.character(header_2010$SUMLEV)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2010) %>%
rename(., LOGRECNO_STR = LOGRECNO)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
header_2010 <- header_2010 %>%
mutate(GEOCODE = paste0(
str_replace_na(STATE, replacement=''),
str_replace_na(str_pad(COUNTY, 3, "left", pad = "0"), replacement=''),
str_replace_na(str_pad(COUSUB, 5, "left", pad = "0"), replacement=''),
sep="")) %>%
filter(., SUMLEV == 60)
header_2010$LOGRECNO <- as.character(header_2010$LOGRECNO)
header_2010$COUSUB <- as.character(header_2010$COUSUB)
header_2010$SUMLEV <- as.character(header_2010$SUMLEV)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2010) %>%
rename(., LOGRECNO_STR = LOGRECNO)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2010)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10 && geo_subset$SUMLEV == 60, ]
View(geo_subset)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2010)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset$COUSUB <- str_pad(geo_subset$COUSUB, 5, "left", pad = "0")
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10 && geo_subset$SUMLEV == 60, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10 && geo_subset$SUMLEV == 60, ]
View(geo_subset)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10 && as.integer(geo_subset$SUMLEV) == 60, ]
View(geo_subset)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10 && (geo_subset$SUMLEV == 60 || geo_subset$SUMLEV == 060, ]
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10 && (geo_subset$SUMLEV == 60 || geo_subset$SUMLEV == 060), ]
View(geo_subset)
as.integer(geo_subset$SUMLEV)
unique(as.integer(geo_subset$SUMLEV))
unique(geo_subset$SUMLEV)
geo_subset <- geo_subset[nchar(geo_subset$GEOCODE) == 10 && as.integer(geo_subset$SUMLEV) == 60, ]
unique(geo_subset$SUMLEV)
View(geo_subset)
geo_subset <- geo_subset[as.integer(geo_subset$SUMLEV) == 60, ]
View(geo_subset)
View(geo_subset)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, str_pad(LOGRECNO, 7, "left", pad = "0"), GEOCODE, COUSUB) %>%
mutate(year = 2010)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, str_pad(LOGRECNO, 7, "left", pad = "0"), GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset$COUSUB <- str_pad(geo_subset$COUSUB, 5, "left", pad = "0")
geo_subset <- geo_subset[as.integer(geo_subset$SUMLEV) == 60, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
View(geo_subset)
library(tidyverse)
library(magrittr)
total_pop_2020 <- part1_2020 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2020)
total_pop_2010 <- part1_2010 %>%
select(FILEID, CHARITER, LOGRECNO, P0010001, P0010003) %>%
mutate(year = 2010)
pop_all <- union_all(total_pop_2010, total_pop_2020)
geo_subset_2010 <- header_2010 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2010)
geo_subset_2020 <- header_2020 %>%
select(STUSAB, SUMLEV, LOGRECNO, GEOCODE, COUSUB) %>%
mutate(year = 2020)
geo_subset <- union_all(geo_subset_2010, geo_subset_2020)
geo_subset$COUSUB <- str_pad(geo_subset$COUSUB, 5, "left", pad = "0")
geo_subset$LOGRECNO <- str_pad(geo_subset$LOGRECNO, 7, "left", pad = "0")
geo_subset <- geo_subset[as.integer(geo_subset$SUMLEV) == 60, ]
write.csv(geo_subset, "../data/me-geo-reference.csv")
write.csv(pop_all, "../data/2010-2020-population-compare.csv")
View(geo_subset)
View(geo_subset)
View(header_2010_add)
View(geo_subset)
